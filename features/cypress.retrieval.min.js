CYPRESS.CONSTS.FORGING_DATA={QUALITY:[1,1.05,1.15,1.27,1.39,1.54,1.69,1.84,1.99,2.14,2.29],GP:{"小型盾":5,"中型盾":10,"大型盾":15},WEIGHT:[[0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,.1,.1,.1,.1],[0,0,0,0,.1,.1,.1,.1,.2,.2,.2],[0,0,0,.1,.1,.1,.2,.2,.2,.3,.3],[0,0,.1,.1,.1,.2,.2,.3,.3,.3,.4],[0,.1,.1,.2,.2,.3,.3,.4,.4,.5,.5]],RANGE:[0,10,20,30,40,60,80,100,120,150,200],SPECIAL_QUALITY:{"弓":[0,0,0,1,2,3,4,5,7,10,15],"銃":[0,1,2,4,6,9,12,16,21,21,21]}},CYPRESS.CONSTS.STANDARD_LEVEL_FLOOR=[1,1,1,1,1,1,1,1,1,24,27,30,33,36,38,40,42,44,46,48,50,52,54,56],CYPRESS.EQUIPMENT_STYLE={ORDERS:{CLASSES:["FIG","THI","MAG","PRI","SAM","NIN","BIS","LOR","CLO","ALC"],PHYSICAL_ATTRIBUTES:["SLASH","STRIKE","PIERCE"],SPECIAL_EFFECTS:["HP","MP","STR","VIT","DEX","AGI","INT","PIE","LUK"],RESISTANCE:["POISON","PARALYZE","PETRIFY","FAINT","BLIND","SLEEP","SILENCE","CHARM","CONFUSION","FEAR"],ATTRIBUTES:["FIRE","WATER","WIND","EARTH","LIGHT","DARK"],FLAGS:["SELL","TRADE","STOLEN","BLESSED","CURSED","BIND"]},REGEXP:{DISABLE_FORGE:/^Legend$|^Artifact$/,RANGED_WEAPONS:/^弓$|^銃$/,SHOTS:/^矢$|^銃弾$/,ACCESSORIES:/^指輪$|^耳飾り$|^首飾り$|^ベルト$/,SHIELDS:/^[大中小]型盾$/,WITHOUT_PHYSICAL_ATTRIBUTES:/^弓$|^銃$|^指輪$|^耳飾り$|^首飾り$|^ベルト$/,WITH_SPECIAL_PROPERTIES:/^弓$|^銃$|^矢$|^銃弾$|^[大中小]型盾$/}},CYPRESS.STATUS={rarity:{Poor:!1,Normal:!1,Good:!1,Master:!1,Epic:!1,Legend:!1,Artifact:!1,Other:!1},"class":{FIG:!1,THI:!1,MAG:!1,PRI:!1,SAM:!1,NIN:!1,BIS:!1,LOR:!1,CLO:!1},type:{"片手剣":!1,"両手剣":!1,"片手斧":!1,"両手斧":!1,"片手鈍器":!1,"両手鈍器":!1,"槍":!1,"暗器":!1,"短剣":!1,"両手杖":!1,"刀":!1,"双刃":!1,"弓":!1,"矢":!1,"銃":!1,"銃弾":!1,"兜":!1,"帽子":!1,"頭巾":!1,"鎧":!1,"外衣":!1,"上衣":!1,"脚鎧":!1,"衣服":!1,"下衣":!1,"手甲":!1,"手袋":!1,"腕輪":!1,"鉄靴":!1,"革靴":!1,"靴":!1,"大型盾":!1,"中型盾":!1,"小型盾":!1,"外套":!1,"指輪":!1,"耳飾り":!1,"首飾り":!1,ベルト:!1},flag:{when_equipped:"all",status_change:"all",blessed:"all",cursed:"all",bind:"all",sell:"all",trade:"all",stolen:"all"}},CYPRESS.SORT_CONFIG={category:"CATALOG",key:"CATALOG",order:"ASC"},CYPRESS.BuilderUtils={isWeapon:function(t){"use strict";return 0<=$.inArray(t,["暗器","短剣","片手剣","両手剣","刀","片手斧","両手斧","槍","片手鈍器","両手鈍器","両手杖","弓","矢","銃","銃弾","双刃"])}},CYPRESS.getEquipmentCard=function(t){"use strict";var n=CYPRESS.COLUMN,e=CYPRESS.CONSTS.CLASSMASKS,i=CYPRESS.CONSTS.STANDARD_LEVEL_FLOOR,s=CYPRESS.EQUIPMENT_STYLE.ORDERS,a=CYPRESS.EQUIPMENT_STYLE.REGEXP,r=CYPRESS.BuilderUtils,o=t.equipment,c=o[n.TYPE],u={card:"",buildTransfarTagData:function(t,e){this.card+='<span class="'+t+'">'+(o[n[t.toUpperCase()]]?"":e)+"</span>"},buildSupplimentTagData:function(t,e){o[n[t.toUpperCase()]]&&(this.card+='<span class="'+t+'"><img src="images/'+t+'.png" alt="">'+e+"</span>")},label:function(t){return this.card+='<span class="label">'+t+"：</span>",this},sectionDivider:function(){return this.card+='<div class="section-divider"></div>',this},group:function(t){return this.card+='<div class="'+t+'">',this},end:function(){return this.card+="</div>",this},unsignedInteger:function(t,n){var e=o[n];return this.card+='<span class="'+t+(0===e?" zero":" positive")+'">'+e+"</span>",this},signedInteger:function(t,n){var e=o[n],i="zero",s=0;return 0>e?(i="negative",s=e):e>0&&(i="positive",s="+"+e),this.card+='<span class="'+t+" "+i+'">'+s+"</span>",this},direct:function(t,n){return this.card+='<span class="'+t+'">'+o[n]+"</span>",this},ribbon:function(){return this.card+='<span class="ribbon '+o[n.RARITY].toLowerCase()+'"></span>',this},copy:function(){return this.card+='<button class="data-copy">&#xe604;</button>',this},rarity:function(){return this.direct("rarity",n.RARITY),this},type:function(){return this.direct("type",n.TYPE),this},level:function(){var t=i[o[n.GRADE]],e=o[n.LEVEL_FLOOR],s=o[n.LEVEL_CEIL],a="Lv "+e,r=-1===s?"":"Lv "+s,c="normal";return-1!==s||e>t?c="negative":t>e&&(c="positive"),this.card+='<span class="level '+c+'">'+a+"～"+r+"</span>",this},grade:function(){var t=o[n.GRADE];return this.card+=t?'<span class="grade">'+t+"</span>":"",this},name:function(){return this.direct("name",n.NAME),this},restriction:function(){return this.direct("restriction",n.RESTRICTION),this},powers:function(){var t=r.isWeapon(c)?"weapons":"guards";return this.card+='<span class="physical '+t+'">'+o[n.PHYSICAL]+'</span><span class="magical '+t+'">'+o[n.MAGICAL]+"</span>",this},whenEquipped:function(){return this.card+=""===o[n.WHEN_EQUIPPED]?'<span class="when-equipped zero"></span>':'<span class="when-equipped '+(o[n.WEPN]?"positive":"negative")+'">'+o[n.WHEN_EQUIPPED]+"</span>",this},statusChange:function(){return this.card+=0<o[n.PERCENT]?'<span class="status-change '+(o[n.SCPN]?"positive":"negative")+'">'+o[n.STATUS_CHANGE]+" ("+o[n.PERCENT]+"%)</span>":'<span class="status-change zero"></span>',this},classRestriction:function(){var t=o[n.CLASS],i=function(n){return'<span class="'+n.toLowerCase()+" "+(t&e[n]?"equipable":"non-equipable")+'">'+n+"</span>"},a=this;return this.group("class-restriction-line"),this.group("class-restriction"),$.each(s.CLASSES,function(){a.card+=i(this)}),this.end(),this.card+='<span class="enchant">'+(-1===o[n.ENCHANT]?"調査中":o[n.ENCHANT])+"</span>",this.end(),this},transfarTags:function(){return this.buildTransfarTagData("sell","[売却不可]"),this.buildTransfarTagData("trade","[トレード不可]"),this.buildSupplimentTagData("bind","使用後トレード不可"),this.buildTransfarTagData("stolen",'<img src="images/stolen.png" alt="略奪されない">略奪されない'),this},supplimentTags:function(){return this.buildSupplimentTagData("blessed","祝福されている"),this.buildSupplimentTagData("cursed","呪われている"),this},physicalAttributes:function(){var t=this;return a.WITHOUT_PHYSICAL_ATTRIBUTES.test(c)||(this.group("physical-attributes"),this.label("物理属性"),$.each(s.PHYSICAL_ATTRIBUTES,function(){t.card+='<span class="'+this.toLowerCase()+'">'+o[n[this]]+"</span>"}),this.end()),this},properties:function(){return this.card+=a.ACCESSORIES.test(c)?'<span class="weight">'+o[n.WEIGHT].toFixed(2)+"</span>":a.SHOTS.test(c)?'<span class="hardness">'+o[n.HARDNESS]+'</span><span class="weight">'+o[n.WEIGHT].toFixed(2)+"</span>":'<span class="durability">'+o[n.DURABILITY]+'</span><span class="hardness">'+o[n.HARDNESS]+'</span><span class="weight">'+o[n.WEIGHT].toFixed(2)+"</span>",this},specialPropertiesLine:function(){var t={"弓":function(){return'<span class="range">'+o[n.RANGE]+'</span><span class="quality bows">'+o[n.QUALITY]+"</span>"},"矢":function(){var t=o[n.RANGE],e=o[n.QUALITY];return'<span class="range-rate'+(100!==t?100>t?" negative":" positive":"")+'">'+t+'%</span><span class="quality-rate bows'+(100!==e?100>e?" negative":" positive":"")+'">'+e+"%</span>"},"銃":function(){return'<span class="range">'+o[n.RANGE]+'</span><span class="quality guns">'+o[n.QUALITY]+'</span><span class="charge-weight">'+o[n.CHARGE_WEIGHT]+"</span>"},"銃弾":function(){var t=o[n.RANGE],e=o[n.QUALITY];return'<span class="range-rate'+(100!==t?100>t?" negative":" positive":"")+'">'+t+'%</span><span class="quality-rate guns'+(100!==e?100>e?" negative":" positive":"")+'">'+e+"%</span>"},"小型盾":function(){var t=o[n.QUALITY];return t?'<span class="quality gp">'+t+"</span>":""},"中型盾":function(){return'<span class="quality gp">'+o[n.QUALITY]+"</span>"},"大型盾":function(){return'<span class="quality gp">'+o[n.QUALITY]+"</span>"}};return a.WITH_SPECIAL_PROPERTIES.test(c)&&(this.group("special-properties"),this.card+=t[c](),this.end()),this},specialEffectsLine:function(){var t=function(){var t={};return $.each(s.SPECIAL_EFFECTS,function(){t[this]=o[n[this]]}),t}(),e=function(){for(var n in t)if(0!==t[n])return!1;return!0}(),i=this;return e||(this.group("special-effects"),this.label("特殊効果"),$.each(s.SPECIAL_EFFECTS,function(){i.signedInteger(this.toLowerCase(),n[this])}),this.end()),this},resistanceLine:function(){var t=function(){var t={};return $.each(s.RESISTANCE,function(){t[this]=o[n[this]]}),t}(),e=function(){for(var n in t)if(0!==t[n])return!1;return!0}(),i=this;return e||(this.group("resistance"),this.label("状態異常耐性"),$.each(s.RESISTANCE,function(){i.unsignedInteger(this.toLowerCase(),n[this])}),this.end()),this},magicAttributesLine:function(){var t={ATTACK:"魔攻属性",RESIST:"魔防属性"},e=this,i=function(){var t=function(t){var e={};return $.each(s.ATTRIBUTES,function(){e[this]=o[n[this+"_"+t]]}),e};return{ATTACK:t("ATTACK"),RESIST:t("RESIST")}}(),a=function(){var t=function(t){for(var n in i[t])if(0!==i[t][n])return!1;return!0};return{ATTACK:t("ATTACK"),RESIST:t("RESIST")}}(),r=function(s){e.group(s),e.label(t[s]),a[s]?e.card+='<span class="allZero">補正なし</span>':$.each(i[s],function(t){e.signedInteger(t.toLowerCase(),n[t+"_"+s])}),e.end()};return a.ATTACK&&a.RESIST||(this.group("magic-attributes"),r("ATTACK"),r("RESIST"),this.end()),this},otherDataLine:function(){var t=o[n.WHEN_EQUIPPED],e=o[n.STATUS_CHANGE];return(""!==t||""!==e)&&(this.group("other-data"),this.card+=""===t?'<span class="when-equipped zero"></span>':'<span class="when-equipped '+(o[n.WEPN]?"positive":"negative")+'">'+o[n.WHEN_EQUIPPED]+"</span>",this.card+=""===e?'<span class="status-change zero"></span>':'<span class="status-change '+(0<o[n.PERCENT]?"positive":"negative")+'">'+o[n.STATUS_CHANGE]+" ("+Math.abs(o[n.PERCENT])+"%)</span>",this.end()),this},notesLine:function(){var t=0,e=1,i={comments:["コメント",o[n.COMMENTS]],sources:["入手方法",o[n.SOURCES]],notes:["ノート",o[n.NOTES]]},s=this;return i.comments[e]+i.sources[e]+i.notes[e]!==""&&(this.group("notes-line"),this.sectionDivider(),$.each(["comments","sources","notes"],function(){""!==i[this][e]&&(s.card+='<div class="'+this+'"><span class="'+this+'-label">'+i[this][t]+'：</span><span class="'+this+'-text">'+i[this][e]+"</span></div>")}),this.end()),this},toolbox:function(){var e=t.forge,i=function(){return a.DISABLE_FORGE.test(o[n.RARITY])?" disabled":a.SHOTS.test(c)?" disabled":""}();return this.card+=0===e?'<div class="toolbox"><div class="tool-buttons"><span class="tool-button forging-plus'+i+'">+1</span><span class="tool-button forging-minus disabled">-1</span></div></div>':10===e?'<div class="toolbox"><div class="tool-buttons"><span class="tool-button forging-plus disabled">+1</span><span class="tool-button forging-minus">-1</span></div></div>':'<div class="toolbox"><div class="tool-buttons"><span class="tool-button forging-plus">+1</span><span class="tool-button forging-minus">-1</span></div></div>',this}};return u.group("equipment-card-inner").ribbon().copy().group("basic-information").group("property").rarity().type().transfarTags().end().group("restrictions").level().grade().restriction().end().group("name-box").name().supplimentTags().end().end().sectionDivider().classRestriction().group("capabilities").powers().properties().physicalAttributes().end().specialPropertiesLine().specialEffectsLine().resistanceLine().magicAttributesLine().otherDataLine().notesLine().end().toolbox(),u.card},CYPRESS.getEquipmentString=function(t){"use strict";var n=CYPRESS.COLUMN,e=CYPRESS.CONSTS.CLASSMASKS,i=CYPRESS.EQUIPMENT_STYLE.ORDERS,s=CYPRESS.EQUIPMENT_STYLE.REGEXP,a=CYPRESS.BuilderUtils,r={string:"",basic:function(){return this.string+=t[n.NAME]+" グレード"+t[n.GRADE]+" "+t[n.RARITY]+" "+t[n.TYPE]+" / ",this},property:function(){var e=t[n.TYPE],i=a.isWeapon(e)?"攻撃力":"防御力";switch(this.string+="物理"+i+"："+t[n.PHYSICAL]+" 魔法"+i+"："+t[n.MAGICAL]+" ",e){case"弓":this.string+="射程距離："+t[n.RANGE]+" 溜め性能："+t[n.QUALITY]+" ";break;case"弓矢":this.string+="射程効率："+t[n.RANGE]+"% 溜め効率："+t[n.QUALITY]+"% ";break;case"銃":this.string+="射程距離："+t[n.RANGE]+" 装填性能："+t[n.QUALITY]+" 装填数："+t[n.CHARGE_WEIGHT]+" ";break;case"銃弾":this.string+="射程効率："+t[n.RANGE]+"% 装填効率："+t[n.QUALITY]+"% ";break;case"小型盾":case"中型盾":case"大型盾":this.string+="GP："+t[n.QUALITY]+" "}return this.string+=s.ACCESSORIES.test(e)?"重量："+t[n.WEIGHT].toFixed(2):s.SHOTS.test(e)?"重量："+t[n.WEIGHT].toFixed(2)+" 硬度："+t[n.HARDNESS]+" ":"耐久度："+t[n.DURABILITY]+" 重量："+t[n.WEIGHT].toFixed(2)+" 硬度："+t[n.HARDNESS]+" ",s.WITHOUT_PHYSICAL_ATTRIBUTES.test(e)||(this.string+="物理属性：[ 斬"+t[n.SLASH]+" 打"+t[n.STRIKE]+" 突"+t[n.PIERCE]+" ]"),this},speciaEffects:function(){var e=function(){var e=[];return $.each(i.SPECIAL_EFFECTS,function(){var i=t[n[this]];0!==i&&e.push(this+(i>0?"+"+i:i))}),e}(),s=this;return 0<e.length&&(this.string+=" ステータス補正：",$.each(e,function(){s.string+=this+" "}),this.string=this.string.slice(0,-1)),this},magicAttributesOffsets:function(){var e={FIRE:"火",WATER:"水",WIND:"風",EARTH:"地",LIGHT:"光",DARK:"闇"},s=function(){var s=[];return $.each(i.ATTRIBUTES,function(){var i=t[n[this+"_RESIST"]];0!==i&&s.push(e[this]+(i>0?"+"+i:i))}),s}(),a=function(){var s=[];return $.each(i.ATTRIBUTES,function(){var i=t[n[this+"_ATTACK"]];0!==i&&s.push(e[this]+(i>0?"+"+i:i))}),s}(),r=this;return 0<s.length&&(this.string+=" 魔法防御属性：",$.each(s,function(){r.string+=this+" "}),this.string=this.string.slice(0,-1)),0<a.length&&(this.string+=" 魔法攻撃属性：",$.each(a,function(){r.string+=this+" "}),this.string=this.string.slice(0,-1)),this},resistances:function(){var e=function(){var e=[],s={POISON:"毒",PARALYZE:"麻痺",PETRIFY:"石化",FAINT:"気絶",BLIND:"暗闇",SLEEP:"睡眠",SILENCE:"沈黙",CHARM:"魅了",CONFUSION:"混乱",FEAR:"恐怖"};return $.each(i.RESISTANCE,function(){var i=t[n[this]];0!==i&&e.push(s[this]+i)}),e}(),s=this;return 0<e.length&&(this.string+=" 状態異常耐性：",$.each(e,function(){s.string+=this+" "}),this.string=this.string.slice(0,-1)),this},otherEffect:function(){var e=t[n.WHEN_EQUIPPED],i=t[n.STATUS_CHANGE];return""!==e&&(this.string+=" 装備時に "+e),""!==i&&(this.string+=" 状態異常："+i+"("+t[n.PERCENT]+"%)"),this},restrictions:function(){var s=function(){var e=t[n.LEVEL_CEIL];return"Lv"+t[n.LEVEL_FLOOR]+"～"+(-1===e?"":"Lv "+e)}(),a=function(){var s=511,a=t[n.CLASS],r="";return a===s?"全職業 ":($.each(i.CLASSES,function(){r+=a&e[this]?this+" ":""}),r)}(),r=t[n.RESTRICTION];return this.string+=" / 装備条件："+a+s,""!==r&&(this.string+=" "+r),this},flags:function(){var e=function(){var e="";return e+=t[n.SELL]?"":"売却不可 ",e+=t[n.TRADE]?"":"トレード不可 ",e+=t[n.STOLEN]?"":"略奪されない ",e+=t[n.BLESSED]?"祝福されている ":"",e+=t[n.CURSED]?"呪われている ":"",e+=t[n.BIND]?"使用後トレード不可 ":""}();return""!==e&&(e=e.slice(0,-1),this.string+=" / "+e),this}};return r.basic().property().speciaEffects().magicAttributesOffsets().resistances().otherEffect().restrictions().flags(),r.string},CYPRESS.displayEquipmentCard=function(t){"use strict";$("#equipments").empty(),$("#usage-button").prop("disabled",!1),$.each(t,function(){$("#equipments").append('<div class="equipment-card" data-catalog="'+this.catalog+'">'+CYPRESS.getEquipmentCard(this)+"</div>")})},CYPRESS.makeRequest=function(){"use strict";var t=CYPRESS.COLUMN,n=function(){var n=$("#equipment-name").val();return""===n?function(){return!0}:function(e){return null!==e[t.NAME].match(n)}}(),e=function(){var n=$("#grade-range").prop("value").split(";"),e=parseInt(n[0],10),i=parseInt(n[1],10);return 0===e?i===CYPRESS.CONSTS.CAPS.GRADE?function(){return!0}:function(n){return n[t.GRADE]<=i}:i===CYPRESS.CONSTS.CAPS.GRADE?function(n){return e<=n[t.GRADE]}:function(n){var s=n[t.GRADE];return s>=e&&i>=s}}(),i=function(){var n=$("#level-range").prop("value").split(";"),e=parseInt(n[0],10),i=parseInt(n[1],10);return 0===e?i===CYPRESS.CONSTS.CAPS.LEVEL?function(){return!0}:function(n){return n[t.LEVEL_FLOOR]<=i}:i===CYPRESS.CONSTS.CAPS.LEVEL?function(n){var i=n[t.LEVEL_CEIL];return e<=(-1===i?CYPRESS.CONSTS.CAPS.LEVEL:i)}:function(n){var s=n[t.LEVEL_CEIL];return e<=(-1===s?CYPRESS.CONSTS.CAPS.LEVEL:s)&&n[t.LEVEL_FLOOR]<=i}}(),s=function(){var n=CYPRESS.CONSTS.CLASSMASKS,e=function(){var t=0;return $.each(CYPRESS.STATUS["class"],function(e,i){t+=i?n[e]:0}),t}();return 0===e||1023===e?function(){return!0}:function(n){return e&n[t.CLASS]}}(),a=function(n){var e=0;return $.each(CYPRESS.STATUS[n],function(){e+=this?1:0}),e?function(e){return CYPRESS.STATUS[n][e[t[n.toUpperCase()]]]}:function(){return!0}},r=function(n){switch(CYPRESS.STATUS.flag[n]){case"only":return function(e){return""!==e[t[n.toUpperCase()]]};case"eliminate":return function(e){return""===e[t[n.toUpperCase()]]};default:return function(){return!0}}},o=function(n,e){switch(CYPRESS.STATUS.flag[n]){case"only":return function(i){return e?!i[t[n.toUpperCase()]]:i[t[n.toUpperCase()]]};case"eliminate":return function(i){return e?i[t[n.toUpperCase()]]:!i[t[n.toUpperCase()]]};default:return function(){return!0}}},c=a("rarity"),u=a("type"),l=r("when_equipped"),S=r("status_change"),p=o("blessed",!1),h=o("cursed",!1),E=o("bind",!1),d=o("sell",!0),f=o("trade",!0),g=o("stolen",!0),C=function(t){return n(t)&&e(t)&&i(t)&&s(t)&&c(t)&&u(t)&&l(t)&&S(t)&&p(t)&&h(t)&&E(t)&&d(t)&&f(t)&&g(t)};return C},CYPRESS.makeCompareFunction=function(){"use strict";var t=CYPRESS.COLUMN,n=CYPRESS.SORT_CONFIG,e="ASC"===n.order?1:-1,i={Poor:1,Normal:2,Good:3,Master:4,Legend:5,Artifact:6},s={LAXICOGRAPHIC:function(){return function(i,s){return(i.equipment[t[n.key]]>s.equipment[t[n.key]]?1:i.equipment[t[n.key]]<s.equipment[t[n.key]]?-1:0)*e}},NUMERIC:function(){return"RARITY"===n.key?function(n,s){return(i[n.equipment[t.RARITY]]-i[s.equipment[t.RARITY]])*e}:function(i,s){return(i.equipment[t[n.key]]-s.equipment[t[n.key]])*e}},CATALOG:function(){return function(t,n){return t.catalog-n.catalog}}};return s[n.category]()},CYPRESS.Forging=function(t){"use strict";var n=CYPRESS.COLUMN,e=CYPRESS.CONSTS.FORGING_DATA,i=CYPRESS.EQUIPMENT_STYLE.REGEXP,s=CYPRESS.EQUIPMENT[t.catalog],a=s[n.TYPE],r=s[n.WEIGHT],o=t.forge,c=t.equipment,u=function(){return.2>r?0:.4>r?1:1>r?2:2>r?3:4>r?4:5}();c[n.NAME]=s[n.NAME]+(o>0?"+"+o:""),c[n.PHYSICAL]=Math.floor(s[n.PHYSICAL]*e.QUALITY[o]),c[n.MAGICAL]=Math.floor(s[n.MAGICAL]*e.QUALITY[o]),c[n.WEIGHT]=r-e.WEIGHT[u][o],i.ACCESSORIES.test(a)||(c[n.DURABILITY]=Math.floor(s[n.DURABILITY]*(1+o/10)),c[n.HARDNESS]=s[n.HARDNESS]+Math.floor(o/5)),i.SHIELDS.test(a)?c[n.QUALITY]=s[n.QUALITY]+o*e.GP[a]:i.RANGED_WEAPONS.test(a)&&(c[n.RANGE]=s[n.RANGE]+e.RANGE[o],c[n.QUALITY]=s[n.QUALITY]+e.SPECIAL_QUALITY[a][o])},CYPRESS.Manager=function(){"use strict";var t=[],n=function(t){$("#records").html(function(){switch(t){case 0:return $("#retrieval-button-main, #retrieval-button-sub").prop("disabled",!0),'<span class="no-records">no records</span>';case CYPRESS.CONSTS.ALL_RECORDS:return $("#retrieval-button-main, #retrieval-button-sub").prop("disabled",!1),'<span class="all-records">'+CYPRESS.CONSTS.ALL_RECORDS+" (all) records</span>";default:return $("#retrieval-button-main, #retrieval-button-sub").prop("disabled",!1),"<span>"+t+" records</span>"}}())},e=function(){t.sort(CYPRESS.makeCompareFunction()),CYPRESS.displayEquipmentCard(t)},i=function(t,n){if(!t.hasClass("disabled")){var e=t.parents("[data-catalog]"),i=e.data("catalog"),a=s(i);a.forge+=n,CYPRESS.Forging(a),e.html(CYPRESS.getEquipmentCard(a)),0===a.forge?(e.find(".forging-plus").removeClass("disabled"),e.find(".forging-minus").addClass("disabled")):10===a.forge?(e.find(".forging-plus").addClass("disabled"),e.find(".forging-minus").removeClass("disabled")):(e.find(".forging-plus").removeClass("disabled"),e.find(".forging-minus").removeClass("disabled"))}},s=function(n){var e=t.length,i=0;do if(parseInt(t[i].catalog,10)===n)return t[i];while((i+=1)!==e);return null},a=function(){return t[Math.floor(Math.random()*t.length)].equipment[CYPRESS.COLUMN.NAME]},r=function(){t=CYPRESS.search(CYPRESS.makeRequest()),n(t.length)},o=function(t,n,e){CYPRESS.STATUS[t][n]=e};return{display:e,forging:i,getCurrentEquipment:s,getEquipmentName:a,search:r,setStatus:o}}(),$(document).ready(function(){"use strict";var t=new $.slidebars;!function(){!function(){t.slidebars.open("right")}(),function(){$("#grade-range").ionRangeSlider({type:"double",min:0,max:CYPRESS.CONSTS.CAPS.GRADE,hide_min_max:!0,values_separator:"-",onFinish:CYPRESS.Manager.search}),$("#level-range").ionRangeSlider({type:"double",min:1,max:CYPRESS.CONSTS.CAPS.LEVEL,hide_min_max:!0,values_separator:"-",onFinish:CYPRESS.Manager.search})}(),function(){$("#choice-types").colorbox({inline:!0,href:"#dialog-types",closeButton:!1,transition:"none",onClosed:function(){CYPRESS.Manager.search()}}),$("#choice-flags").colorbox({inline:!0,href:"#dialog-flags",closeButton:!1,transition:"none",onClosed:function(){CYPRESS.Manager.search()}})}(),function(){var t=function(){var t=$(this),n=t.data("label");t.iCheck({checkboxClass:"icheckbox",radioClass:"icheckbox",insert:'<div class="icheck-icon"></div>'+n})};!function(){var n=function(){var t=$(this),n=t.data("label");t.iCheck({checkboxClass:"icheckbox "+n.toLowerCase(),insert:'<div class="icheck-icon"></div>'+n})},e=function(t){return function(){var n=$(this),e=n.data("label");CYPRESS.Manager.setStatus(t,e,n.prop("checked")),CYPRESS.Manager.search()}};$("#query-rarities input").each(n).on("ifChanged",e("rarity")),$("#query-classes input").each(t).on("ifChanged",e("class")),$("#dialog-types .control-box input").each(t),$("#wrap-weapons input, #wrap-protective-gear input, #wrap-accessories input").on("ifChanged",function(){var t=$(this),n=t.data("label");CYPRESS.Manager.setStatus("type",n,t.prop("checked"))}),$("#dialog-flags .control-box input").each(t)}(),function(){var n=function(t,n,e){var i=CYPRESS.SORT_CONFIG;i.category=t,i.key=n,i.order=e},e=function(){$("#usage").length||CYPRESS.Manager.display()},i=function(t){return function(){n($(this).data("category"),$("#"+t+"-sort-list :checked").data("key"),$("#"+t+"-sort-order-change").data("order")),$("#"+t+"-sort-list").slideDown(),$("#"+t+"-sort-order-change").prop("disabled",!1)}},s=function(t){return function(){$("#"+t+"-sort-list").slideUp(),$("#"+t+"-sort-order-change").prop("disabled",!0)}};$("#sorting-pane [name=sort-category]").each(t),$("#lexicographic-sort-list input, #numeric-sort-list input").each(t).on("ifClicked",function(){$(this).prop("checked")&&e()}).on("ifChecked",function(){CYPRESS.SORT_CONFIG.key=$(this).data("key"),e()}),$("#catalog-order").on("ifChecked",function(){n("CATALOG","CATALOG","ASC"),e()}),$("#lexicographic-order").on("ifChecked",i("lexicographic")).on("ifUnchecked",s("lexicographic")),$("#numeric-order").on("ifChecked",i("numeric")).on("ifUnchecked",s("numeric"))}()}()}(),function(){!function(){var t=function(t,n){return function(){var e=$("#query-"+t).prop("checked")?"check":"uncheck";$(n).each(function(){$(this).iCheck(e)})}},n=function(t,n){return function(){var e=$(n).length,i=$(n+":checked").length;i===e?$("#query-"+t).iCheck("check"):0===i?$("#query-"+t).iCheck("uncheck").iCheck("determinate"):$("#query-"+t).iCheck("indeterminate")}},e=function(t){return function(){$(t).each(function(){$(this).parent().addClass("hover")})}},i=function(t){return function(){$(t).each(function(){$(this).parent().removeClass("hover")})}};$.each(["weapons","protective-gear","accessories"],function(s,a){var r="#wrap-"+a+" input";$("#query-"+a).on("ifToggled",t(a,r)).on("ifDeterminate",t(a,r)).next().next().mouseover(e(r)).mouseout(i(r)),$(r).on("ifToggled",n(a,r))}),$.each(["head","torso","legs","arms","feet","shields"],function(s,a){var r="#wrap-protective-gear ."+a;$("#query-"+a).on("ifToggled",t(a,r)).next().next().mouseover(e(r)).mouseout(i(r)),$(r).on("ifToggled",n(a,r))}),$("#dialog-types-reset").bind("click",function(){$.each(["weapons","protective-gear","accessories"],function(t,n){$("#query-"+n).iCheck("uncheck").iCheck("determinate")})}),$("#dialog-types-close").bind("click",function(){$.colorbox.close()})}(),function(){$.each(["all","only","eliminate"],function(t,n){$("#dialog-flags ."+n).on("ifChecked",function(){CYPRESS.Manager.setStatus("flag",$(this).data("flag"),n)})}),$("#dialog-flags-reset").bind("click",function(){$("#dialog-flags .all").iCheck("check")}),$("#dialog-flags-close").bind("click",function(){$.colorbox.close()})}(),function(){var n=$("#usage");n.remove(),$("#usage-button").bind("click",function(){$("#equipments").prepend(n),$("#usage-button").prop("disabled",!0)}),$("#logo").bind("click",function(){$("body").animate({scrollTop:0},"slow","swing")}),$("#equipment-name").bind("change",CYPRESS.Manager.search),$("#retrieval-button-main, #retrieval-button-sub").bind("click",function(){CYPRESS.Manager.display(),t.slidebars.close(),$("#toolbox-button").removeClass("close")}),$("#reqiest-reset-button").click(function(){$("#equipment-name").val(""),$("#grade-range").data("ionRangeSlider").reset(),$("#level-range").data("ionRangeSlider").reset(),$("#query-rarities input").each(function(){$(this).iCheck("uncheck")}),$("#query-classes input").each(function(){$(this).iCheck("uncheck")}),$("#dialog-types-reset").click(),$("#dialog-flags-reset").click(),CYPRESS.Manager.search()}),function(){var t=function(t){return function(){var n=$(this),e="ASC"===n.data("order")?"DESC":"ASC";$(this).html(t[e]),n.data("order",e),CYPRESS.SORT_CONFIG.order=e,$("#usage").length||CYPRESS.Manager.display()}};$("#lexicographic-sort-order-change").bind("click",t({ASC:'<span class="icon">&#xe603;</span> 辞書順　',DESC:'<span class="icon">&#xe602;</span> 逆辞書順'})),$("#numeric-sort-order-change").bind("click",t({ASC:'<span class="icon">&#xe601;</span> 低 → 高',DESC:'<span class="icon">&#xe600;</span> 高 → 低'}))}()}(),function(){$.event.special.copy.options.hoverClass="data-copy-hover",$.event.special.copy.options.activeClass="data-copy-active",$("#equipments").on({click:function(){CYPRESS.Manager.forging($(this),1)}},".forging-plus"),$("#equipments").on({click:function(){CYPRESS.Manager.forging($(this),-1)}},".forging-minus"),$("#equipments").on({copy:function(t){t.clipboardData.clearData(),t.clipboardData.setData("text/plain",CYPRESS.getEquipmentString(CYPRESS.Manager.getCurrentEquipment($(this).parents("[data-catalog]").data("catalog")).equipment)),t.preventDefault(),$("#tool-commentary").text("コピーしました (*ゝω･*)")},mouseenter:function(){var t=$(this).parents("[data-catalog]").find(".name").text();$("#tool-commentary").text(t+" のデータをコピー"),$(this).parents("[data-catalog]").find(".toolbox").css("visibility","visible")},mouseleave:function(){$("#tool-commentary").text(""),$(this).parents("[data-catalog]").find(".toolbox").css("visibility","")}},".data-copy")}()}(),$("#reqiest-reset-button").click(),$("#usage-button").click(),$("#equipment-name").prop("placeholder","例："+CYPRESS.Manager.getEquipmentName())});
//# sourceMappingURL=cypress.retrieval.min.js.map